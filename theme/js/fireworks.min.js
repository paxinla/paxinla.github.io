var numberOfParticules=20,minOrbitRadius=50,maxOrbitRadius=100,minCircleRadius=10,maxCircleRadius=20,minAnimeDuration=900,maxAnimeDuration=1500,minDiffuseRadius=50,maxDiffuseRadius=100,pointerX=0,pointerY=0,colors=["221, 102, 217","250, 140, 200","207, 19, 56"],canvasEl=document.querySelector(".fireworks"),ctx=canvasEl.getContext("2d");function setCanvasSize(b){b.width=window.innerWidth;b.height=window.innerHeight;b.style.width=window.innerWidth+"px";b.style.height=window.innerHeight+"px"}setCanvasSize(canvasEl);function updateCoords(b){pointerX=b.clientX||(b.touches[0]?b.touches[0].clientX:b.changedTouches[0].clientX);pointerY=b.clientY||(b.touches[0]?b.touches[0].clientY:b.changedTouches[0].clientY)}function setParticuleDirection(b){var c=anime.random(0,360)*Math.PI/180,a=anime.random(minDiffuseRadius,maxDiffuseRadius);a*=[-1,1][anime.random(0,1)];return{x:b.x+a*Math.cos(c),y:b.y+a*Math.sin(c)}}function createParticule(b,c){var a={};a.x=b;a.y=c;a.color="rgba("+colors[anime.random(0,colors.length-1)]+","+anime.random(.2,.8)+")";a.radius=anime.random(minCircleRadius,maxCircleRadius);a.endPos=setParticuleDirection(a);a.draw=function(){ctx.beginPath();ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0);ctx.fillStyle=a.color;ctx.fill()};return a}function createCircle(b,c){var a={};a.x=b;a.y=c;a.color="#000";a.radius=.1;a.alpha=.5;a.lineWidth=6;a.draw=function(){ctx.globalAlpha=a.alpha;ctx.beginPath();ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0);ctx.lineWidth=a.lineWidth;ctx.strokeStyle=a.color;ctx.stroke();ctx.globalAlpha=1};return a}function renderParticule(b){for(var c=0;c<b.animatables.length;c++)b.animatables[c].target.draw()}function animateParticules(b,c){for(var a=createCircle(b,c),e=[],f=0;f<numberOfParticules;f++)e.push(createParticule(b,c));anime.timeline().add({targets:e,x:function(d){return d.endPos.x},y:function(d){return d.endPos.y},radius:.1,duration:anime.random(minAnimeDuration,maxAnimeDuration),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(minOrbitRadius,maxOrbitRadius),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule},0)}document.addEventListener("DOMContentLoaded",function(){var b=anime({duration:Infinity,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener("mousedown",function(c){b.play();updateCoords(c);animateParticules(pointerX,pointerY)},!1)});window.addEventListener("resize",setCanvasSize(canvasEl),!1);
